(function(e){e(".cbl-shortcode-wrap").foundation();var t,n={},r={},i=new google.maps.LatLngBounds;e(document).ready(function(){function o(e,t,n,r){return function(){r.open(t,n)}}e("#cbl-map-canvas").height(e(".cbl-locations").height());var s={zoom:6,center:new google.maps.LatLng(41.850033,-87.6500523),mapTypeId:google.maps.MapTypeId.ROADMAP,scrollwheel:!1};t=new google.maps.Map(e("#cbl-map-canvas").get(0),s);e(".cbl-location").each(function(s){var o=e(this).data("locationId"),u=e(this).data("title"),a=e(this).data("address"),f=e(this).data("phone"),l=e(this).data("lat"),c=e(this).data("lng"),h=new google.maps.LatLng(l,c);i.extend(h);n[o]=new google.maps.Marker({position:h,map:t});e(n[o]).data("locationId",o);r[o]=new google.maps.InfoWindow({content:'<div class="cbl-infowindow"><h4>'+u+"</h4><p>"+a+"</br>"+f+"</p></div>"});google.maps.event.addListener(n[o],"click",function(){r[o].open(t,n[o]);e(".cbl-location").removeClass("active");e(".cbl-location-"+o).addClass("active");e("#cbl-map-canvas").height(e(".cbl-locations").height())});t.fitBounds(i)});e(".cbl-location").live("click",function(){var i=e(this).data("locationId");r[i].open(t,n[i]);e("#cbl-map-canvas").height(e(".cbl-locations").height())});google.maps.event.addListener(t,"zoom_changed",function(){zoomChangeBoundsListener=google.maps.event.addListener(t,"bounds_changed",function(e){if(this.getZoom()>15&&this.initialZoom===!0){this.setZoom(11);this.initialZoom=!1}google.maps.event.removeListener(zoomChangeBoundsListener)})});t.initialZoom=!0;t.fitBounds(i)})})(jQuery);