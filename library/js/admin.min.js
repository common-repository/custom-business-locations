(function(e){e(".sortable").sortable();var t,n=new google.maps.Geocoder;e(document).ready(function(){e(".locations .location").each(function(t){var n=e(this).find(".location-lat").val(),r=e(this).find(".location-lng").val(),i=new google.maps.LatLng(n,r),s={zoom:9,center:i,mapTypeId:google.maps.MapTypeId.ROADMAP,disableDefaultUI:!0,draggable:!1,zoomControl:!1,scrollwheel:!1,disableDoubleClickZoom:!0};e(this).find(".map-canvas").height(400);var o=new google.maps.Map(e(this).find(".map-canvas").get(0),s);o.setCenter(i);var u=new google.maps.Marker({map:o,position:i})});setTimeout(function(){e(".cbl_plugin_options_wrap").foundation()},200)});e("#add-location").live("click",function(t){t.preventDefault();var n=e(".locations .location").size(),r={action:"cbl_plugin_options",order:n,add_location:!0};e.post(ajaxurl,r,function(t){e("#no-locations-alert").hide();e(".locations").append(t)})});e(".close-section").live("click",function(t){t.preventDefault();e(this).closest(".location").removeClass("active")});e(".remove-location").live("click",function(t){t.preventDefault();var n=e(this).parents(".location").data("locationId");e(this).parents(".location").remove();setTimeout(function(){e(".locations .location").size()<1&&e("#no-locations-alert").show();var t={action:"cbl_plugin_options",order:n,remove_location:!0};e.post(ajaxurl,t,function(e){})},200)});e(".location-closed").live("change",function(){if(e(this).is(":checked")){e(this).parents(".location-day").find(".location-from").val("");e(this).parents(".location-day").find(".location-to").val("");e(this).parents(".location-day").find(".location-from").attr("readonly",!0);e(this).parents(".location-day").find(".location-to").attr("readonly",!0)}else{e(this).parents(".location-day").find(".location-from").val("12:00");e(this).parents(".location-day").find(".location-to").val("12:00");e(this).parents(".location-day").find(".location-from").attr("readonly",!0);e(this).parents(".location-day").find(".location-to").attr("readonly",!0)}});e(".location-title").live("keyup",function(){e(this).parents(".location").find(".title a").html(e(this).val())});e(".location-address").live("keyup",function(){if(e(this).val().length<4)return;var r=e(this);window.clearTimeout(t);t=window.setTimeout(function(){n.geocode({address:r.val()},function(t,n){var i="";if(n===google.maps.GeocoderStatus.OK){var s=0;e.each(t,function(e,t){if(!(s<5))return;i+='<p><a class="search-result panel phone-12 columns" href="#" data-address="'+t.formatted_address+'" data-lng="'+t.geometry.location.lng()+'" data-lat="'+t.geometry.location.lat()+'">'+t.formatted_address+"</a></p>";s++})}else i="";r.siblings(".address-search-results").show().html(i)})},500)});e(".search-result").live("click",function(t){t.preventDefault();var n=e(this).data("lat"),r=e(this).data("lng"),i=e(this).parents(".address-wrap"),s=e(this).data("address");i.find(".location-address").val(s);i.find(".location-latlng").val(n+", "+r);i.find(".location-lat").val(n);i.find(".location-lng").val(r);i.find(".map-canvas").height(400);e(this).parents(".address-search-results").html("").hide();var o=new google.maps.LatLng(n,r),u={zoom:9,center:o,mapTypeId:google.maps.MapTypeId.ROADMAP,disableDefaultUI:!0,draggable:!1,zoomControl:!1,scrollwheel:!1,disableDoubleClickZoom:!0},a=new google.maps.Map(i.find(".map-canvas").get(0),u);a.setCenter(o);var f=new google.maps.Marker({map:a,position:o})})})(jQuery);